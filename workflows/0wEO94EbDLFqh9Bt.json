{
  "active": false,
  "connections": {
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-09-19T11:18:22.021Z",
  "id": "0wEO94EbDLFqh9Bt",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Reschedule",
  "nodes": [
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -752,
        -16
      ],
      "id": "0980d0f2-02fc-4a22-85f4-c806a63289e2",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -416,
        -16
      ],
      "id": "6489592e-bf6b-422c-bcd1-5c99d1a1dd7d",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cal.com/v2/bookings/da/reschedule",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "cal-api-version",
              "value": "2024-08-13"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "start",
              "value": "da"
            },
            {
              "name": "reschedulingReason",
              "value": "I have to go my office meeting."
            },
            {
              "name": "rescheduledBy",
              "value": "ubaidnasir1631@gmail.com"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -208,
        -16
      ],
      "id": "e3f622df-6019-4997-b5c6-7958371f6d13",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        -144
      ],
      "id": "bcc7f440-6605-466e-b507-0de4a10975de",
      "name": "When chat message received",
      "webhookId": "83d21d73-a6ae-4555-b7e1-54d2703a4bda"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "You are a professional and highly helpful AI data analyst.\n",
        "options": {
          "systemMessage": "=You are an AI automation agent connected to Google Sheets and a booking system. Your task is to manage user bookings efficiently. Follow these steps carefully:\n\n1.Always request the following details from the user:\n\nName (required)\n\nEmail (optional)\n\nPhone number (required)\n\nType of meeting booked (optional), e.g., “Meeting with Ubaid for a therapy session\n\n\n2. Fetch Booking Info:\n   - Retrieve the booking details from Google Sheets using the user’s Phone Number and Name.\n   - Extract: AttendeeName, AttendeeEmail, AttendeePhoneNo., StartTime, EndTime, HostNameOfTheEvent, TitleOfTheBooking, EventTypeLocation and TheTimeAtBookingIsCreated.\n\nThe Output Format Example:\nOutPut Format As Json:\n{\n  \"bookingDetails\": {\n    \"TitleOfTheMeeting\": \"APPOINTMENT FOR THERAPY SESSION between Mukhtar Ubaid and ubaid nasir\",\n    \"BookingID\": \"11053047\",\n    \"UID\": \"d6tkXhj2jEkisCZrlrDDE\",\n    \"StartTime\": \"2025-09-20T07:00:00.000Z\",\n    \"EndTime\": \"2025-09-20T07:30:00.000Z\",\n    \"EventTypeSlug\": \"appointment-for-therapy-session\",\n    \"EventTypeID\": \"3311116\",\n    \"LocationOfTheMeeting\": \"Bright Smile Dental Care, 12-B Gulshan Avenue, Block D, Lahore, Punjab, Pakistan 54000.\",\n    \"BookingCreatedAtUTC\": \"2025-09-20T05:10:26.633Z\",\n    \"HostName\": \"Mukhtar Ubaid\",\n    \"TheTimeAtMeetingIsCreated\": \"2025-09-20T05:10:26.633Z\",\n    \"Attendees\": [\n      {\n        \"Name\": \"ubaid nasir\",\n        \"Email\": \"ubaidnasir1631@gmail.com\",\n        \"TimeZone\": \"Asia/Karachi\",\n        \"Language\": \"en\",\n        \"PhoneNumber\": \"918938391\"\n      }\n    ]\n  },\n}\n\nRules:\n- Only fetch and update Google Sheets; do not perform actions outside your tools.\n- Always confirm action with the user.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        208,
        -144
      ],
      "id": "dd788665-a1fe-4489-94d1-196705450084",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        80,
        64
      ],
      "id": "7a7bba11-5bef-4f1d-8094-384b1d234b0e",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "sPfpmF39mpaLYCjc",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Sa93ckJV4bNFE9IZ7zHOZC85f95G5UAGQqi57UBN09Q",
          "mode": "list",
          "cachedResultName": "cal.com Booking uids",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Sa93ckJV4bNFE9IZ7zHOZC85f95G5UAGQqi57UBN09Q/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Sa93ckJV4bNFE9IZ7zHOZC85f95G5UAGQqi57UBN09Q/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        368,
        64
      ],
      "id": "3291aa16-bf1a-4f9a-aacf-ed3aff5a70bc",
      "name": "Get row(s) in sheet in Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "JOHwDixlr7umKmYo",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        224,
        64
      ],
      "id": "44d579b9-210b-460f-be2f-b1f6f9098f94",
      "name": "Simple Memory"
    }
  ],
  "pinData": {
    "When Executed by Another Workflow": [
      {
        "json": {
          "query": "{\"booking_id\":\"appt_12345abc\",\"new_isoDateTime\":\"2024-10-30T14:00:00.000Z\"}"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-09-19T11:18:22.023Z",
      "updatedAt": "2025-09-19T11:18:22.023Z",
      "role": "workflow:owner",
      "workflowId": "0wEO94EbDLFqh9Bt",
      "projectId": "HHLWOKEAArOwm3kN"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-09-20T05:52:40.000Z",
  "versionId": "cee16104-82fd-4b36-96da-359b63922212"
}